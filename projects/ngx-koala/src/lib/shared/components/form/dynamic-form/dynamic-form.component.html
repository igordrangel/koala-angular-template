<div (ngSubmit)="emitData()" [formGroup]="form" class="p-relative w-100">
  <div *ngFor="let propriedade of controls?.controls; let i = index;"
       [ngClass]="propriedade.get('class').value"
       formArrayName="formData">
    <mat-form-field
      *ngIf="propriedade.get('type').value == typeField.text ||
             propriedade.get('type').value == typeField.password ||
             propriedade.get('type').value == typeField.cpf ||
             propriedade.get('type').value == typeField.cnpj ||
             propriedade.get('type').value == typeField.datetime ||
             propriedade.get('type').value == typeField.email ||
             propriedade.get('type').value == typeField.number ||
             propriedade.get('type').value == typeField.time ||
             propriedade.get('type').value == typeField.phone"
      [formGroupName]="i"
      [appearance]="propriedade.get('appearance').value"
      [floatLabel]="propriedade.get('floatLabel').value"
      [ngClass]="propriedade.get('fieldClass').value">
      <mat-label>{{propriedade.get('label').value}}</mat-label>
      <input
        [dropSpecialCharacters]="false"
        [mask]="
                    ((propriedade.get('type').value == typeField.phone) ? '(00)0000-0000?0' : null) ||
                    ((propriedade.get('type').value == typeField.cpf) ? '000.000.000-00' : null) ||
                    ((propriedade.get('type').value == typeField.cnpj) ? '00.000.000/0000-00' : null)"
        [required]="propriedade.get('required').value"
        [type]="
                    ((propriedade.get('type').value == typeField.cpf ||
                      propriedade.get('type').value == typeField.cnpj ||
                      propriedade.get('type').value == typeField.phone
                    )) ? 'tel' : (
                      propriedade.get('type').value == typeField.datetime ?
                      'date' : (
                      propriedade.get('type').value == typeField.email ?
                      'email' : (
                      propriedade.get('type').value == typeField.number ?
                      'number' : (
                      propriedade.get('type').value == typeField.time ?
                      'time' : (
                      propriedade.get('type').value == typeField.password ?
                      'password' : 'text')))))"
        [validation]="
                    (propriedade.get('type').value == typeField.cpf && propriedade.get('value').errors?.cpfInvalid) ||
                    (propriedade.get('type').value == typeField.cnpj && propriedade.get('value').errors?.cnpjInvalid)"
        formControlName="value"
        matInput/>
      <button
        (click)="passwordView(i)"
        *ngIf="propriedade.get('hidePassword').value !== null"
        [attr.aria-label]="'Hide password'"
        [attr.aria-pressed]="propriedade.get('hidePassword').value" mat-icon-button matSuffix type="button">
        <mat-icon>{{propriedade.get('hidePassword').value ? 'visibility_off' : 'visibility'}}</mat-icon>
      </button>
      <mat-hint *ngIf="propriedade.get('textHint').value">
        <mat-icon>info</mat-icon>
        {{propriedade.get('textHint').value}}
      </mat-hint>
      <mat-error *ngIf="propriedade.get('value').errors?.required">
        <mat-icon>error</mat-icon>
        {{propriedade.get('label').value}} não informado(a).
      </mat-error>
      <mat-error *ngIf="propriedade.get('value').errors?.cpfInvalid">
        <mat-icon>error</mat-icon>
        CPF inválido.
      </mat-error>
      <mat-error *ngIf="propriedade.get('value').errors?.cnpjInvalid">
        <mat-icon>error</mat-icon>
        CNPJ inválido.
      </mat-error>
      <mat-error *ngIf="propriedade.get('value').errors?.email">
        <mat-icon>error</mat-icon>
        E-mail inválido.
      </mat-error>
    </mat-form-field>
    <mat-form-field
      *ngIf="propriedade.get('type').value == typeField.valueList ||
             propriedade.get('type').value == typeField.textarea"
      [formGroupName]="i"
      [appearance]="propriedade.get('appearance').value"
      [floatLabel]="propriedade.get('floatLabel').value"
      [ngClass]="propriedade.get('fieldClass').value">
      <mat-label>{{propriedade.get('label').value}}</mat-label>
      <textarea
        [mat-autosize]="true"
        [matAutosizeMaxRows]="8"
        [matAutosizeMinRows]="3"
        [required]="propriedade.get('required').value"
        formControlName="value"
        matInput>
            </textarea>
      <mat-hint *ngIf="propriedade.get('textHint').value">
        <mat-icon>info</mat-icon>
        {{propriedade.get('textHint').value}}
      </mat-hint>
      <mat-error *ngIf="propriedade.get('value').errors?.required">
        <mat-icon>error</mat-icon>
        {{propriedade.get('label').value}} não informado(a).
      </mat-error>
    </mat-form-field>
    <mat-form-field
      *ngIf="propriedade.get('type').value == typeField.select"
      [formGroupName]="i"
      [appearance]="propriedade.get('appearance').value"
      [floatLabel]="propriedade.get('floatLabel').value"
      [ngClass]="propriedade.get('fieldClass').value">
      <mat-label>{{propriedade.get('label').value}}</mat-label>
      <mat-select [required]="propriedade.get('required').value" formControlName="value">
        <mat-option *ngFor="let options of propriedade.get('opcoesSelect').value" [value]="options.value">
          {{options.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <div
      *ngIf="propriedade.get('type').value == typeField.checkbox"
      [formGroupName]="i"
      [ngClass]="propriedade.get('fieldClass').value">
      <mat-checkbox
        formControlName="value"
        value="true">
        {{propriedade.get('label').value}}
      </mat-checkbox>
    </div>
  </div>
  <ng-content select="[btn-submit]"></ng-content>
</div>
